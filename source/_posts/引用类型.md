---
title: 第五章——引用类型
date: 2020-05-04 16:28:47
tags: javaScript
---
### 5.1 Object类型
创建方法
- new关键字
- 对象字面量
```javascript
  // 创建Object实例的方法
  // 方法一 使用new操作符后跟Object构造函数
  var personal = new Object()
  personal.name = 'dreamer'
  personal.age = 25
  // 方法二 使用对象字面量
  var personal = {
    name: 'dreamer',
    age: 25,
  }
```
访问方式：
  - 点表示法
  - 方括号表示法 可以通过变量来访问属性
```javascript
  personal.name = 'dreamer'
  personal['name'] = 'dreamer'
```
<!-- more -->
### 5.2 Array类型 （有序列表）
ECMASctipt数组的每一项可以保存任何类型的数据，数组的大小是可以动态调整的，既可以随着数组的增加自动增长以容纳新增数据。创建数组的基本方法有**2**种：
- Array构造函数
- 数组字面量表示法
```javascript
  // 1、Array构造函数
  var colors = new Array()
```
如果预先知道数组要保存的项目数量，也可以给构造函数传递该数量，而该数量会自动变成length属性的值。创建length值为20的数组：
```javascript
  var colors = new Array(20)
```
给构造函数传递一个值也可以创建数组，如果传递的是数值，则会按照数值创建包含给定项数的数组，而如果传递的是其他类型的参数，则会创建包含那个值的只有一项的数组。
```javascript
  var colors = new Array(3) // 创建一个包含3项的数组
  var names = new Array('dreamer') // 创建一个包含1项，即字符串'dreamer'的数组
```
在使用Array构造函数时也可以省略new操作符，与有new操作的作用完全一致。
```javascript
  var colors = ['red', 'blue', 'green']
```
在读取和数组的的值时，要使用**方括号**并提供相应值得**基于0的数字索引**。如果设置某个值得索引超过了数组现有的项数，数据就会自动增加到该索引值加1的长度。数组的项数保存在length属性中，这个属性始终会返回0或者更大的值。  
数组的length属性**不是只读的**，通过设置该属性，可以从数组的末尾益处或者向数组中添加新项。
#### 5.2.1 检测数组
- instanceof 操作符
- isArray
- Object.prototype.toString.call
```javascript
  value instanceof Array
  Array.isArray(value)
```
#### 5.2.2 转换方法
所有对象都具有toLocaleString()、toString()和value()方法，调用数组的toString()方法会返回有数组中每个值得**字符串形式拼接而成的一个以逗号分割的字符串**。而调用**valueOf()返回的还是数组**.
#### 5.2.3 栈方法
栈：LIFO(fist-In-Last-Out)后进先出，栈中项的插入（叫做**推入**）和移除（叫做**弹出**）ECMAScript提供了push和pop方法。
- push()方法可以接受任意数量的参数，逐个添加到数组末尾，并**返回修改后数组的长度**
- pop()从数组末尾移除最后一项，减少数组的length值，然后**返回移除的项**
#### 5.2.4 队列方法
FIFO：(First-In-First-Out)
队列在列表的**末尾添加项**，从列表的**前端移除项**
- shift移除数组中的第一项并返回该项，同时将数组长度减1
- unshift在数组前端添加任意项并**返回新数组的长度**
#### 5.2.5 重排序方法
- reverse会反转数组
- 按照
升序排列数组项-最小的值位于在前面，最大的值排在最后面。sort()方法回调用每个数组项的toString()转型方法，然后比较得到的字符串，已确定如何排序。即使数组中的每一项都是数值，sort()方法比较的也是字符串。
sort()方法可以接收一个比较函数作为参数，以便指定那个值位于那个值的前面。比较函数**接受两个参数**
- 负数 第一个参数位于第二个参数前面
- 0 两个参数相等
- 正数 第一个参数位于第二个参数之后
#### 5.2.6 操作方法
- concat()基于当前数组中的所有项创建一个新数组。现创建当前数组的一个副本，然后将接受到的参数添加到这个副本的末尾，最后返回新构建的数组。
- slice()基于当前数组中的一或多个项创建一个新数组。接收一个或两个参数（**返回项的起始和结束位置*。*）
`一个参数`从该参数指定位置开始到当前数组末尾的所有项
`两个参数`返回起始和结束位置之间的项（**不包含结束位置的项，不会影响原始数组**）
`存在一个负数`用数组长度加上改数来确定相应的位置。例：在一个包含5项的数组上调用slice(-2, -1)与调用slice(3, 4)得到的结果相同。**如果结束位置小于起始位置，则返回空数组**
- splice()主要用途是项数组的中部插入项
`删除`可以删除任意数量的项，指定两个参数（要删除的第一项位置和要删除的项数）splice(0, 2) 会删除数组中的前两项
`插入`向指定位置插入任意数量的项，需提供三个参数：起始位置、0（要删除的项数）和插入的项数。如果要插入多个项，可以传入第四、第五、易至任意多个项。splice(2, 0, 'red', 'yellow')回从当前数组的位置开始2开始，插入red和yellow。
`替换`可以指定位置插入任意数量的项。  
splice()方法始终都会返回一个数组，该数组中包含从**原始数组中删除的项**（如果没有删除任何项，返回空数组）
#### 5.2.7 位置方法
- indexOf() 从数组的开头开始向后查找；
- lastIndexOf() 从数组的末尾开始向前查找；
都接收两个参数：要查找的项和（可选的）表示查找**起点位置的索引**。都返回要查找的项在**数组中的位置**，
或者在**没找到的情况下返回-1**。在比较第一个参数时，会使用全等操作符，即就是要求查找的项**必须严格相等**。
#### 5.2.8 迭代方法
- every() 每一项都返回true，则返回true
- filter() 返回该函数回返回true的项组成的数组
- forEach() **没有返回值**
- map() 返回每次函数调用的结果组成的数组
- some() 任一项返回true，则返回true
每个方法都接受两个参数：要在每一项上运行的函数和（可选的）运行该函数的作用域对象——影响this的值。
#### 5.2.9 归并方法
- reduce() 从数组的第一次昂开始，逐个遍历到最后
- reduceRight() 从数组的最后一项开始，向前遍历到第一项
都会迭代数组的所有项，然后构建一个最终返回的值。都接收两个参数：一个在每一项上调用的函数和（可选的）作为归并基础的初始值。  
传给reduce()和reduceRight()的函数接收**四个参数**：前一个值、当前值、项的索引和数组的对象。这个函返回的任何值都会作为第一个参数传递给下一项。第一次迭代发生在数组的第二项上，因此第一个参数是数组的第一项，第二个参数就是数组的第二项。使用reduce()方法可以执行求数组中所有值之和的操作：
```javascript
  const values = [1, 2, 3, 4]
  const sum = values.reduce((prev, next, index, array) => prev + next)
```
使用reduce()还是reduceRight(),主要取决于从那头开始遍历数组。除此之外，它们完全相同。
