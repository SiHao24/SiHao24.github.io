---
title: Vue学习记录
date: 2021-08-16 11:22:05
tags: Vue
---
## Object.defineProperty VS Proxy
Proxy本质上是对某个对象的劫持，这样它不仅仅可以监听对象某个属性的变化，还可以监听对象属性的新增和删除；而Object.defineProperty是给对象的某个**已存在的属性**添加对象的getter和setter，所以它只能监听这个属性值的变化，而不能去监听对象属性的新增和删除。

而响应式在性能方面的优化其实是体现在把钱套层级较深的对象变成响应式的场景。在Vue2的实现中，在组件初始化阶段吧数据变成响应式时，遇到子属性任然是对象的情况，会递归执行Object.defineProperty定义子对象的响应式。而在Vue3的实现中，只有在对象属性被访问的时候才会判断子属性的类型来决定要不要递归执行reactive，这其实是一种延时定义子对象响应式的实现，在性能上会有一定的提升。
## 响应式原理
所谓响应式，就是当我们修改数据之后，可以自动做某些事情；对应到组件的渲染，就是修改数据后，能自动触发组件的重新渲染。Vue3实现响应式，本质上是通过Proxy API劫持了数据对象的读写，当我们访问数据时，会触发getter执行依赖收集；修改数据时，会触发setter派发通知。
